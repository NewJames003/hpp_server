<!doctype HTML>
<html>
<head>
  <title>view </title>
</head>
<body>
  <div id="save">

  </div>
  <script src="https://www.gstatic.com/firebasejs/5.8.1/firebase-app.js"></script>



  <script src="https://www.gstatic.com/firebasejs/5.8.1/firebase-database.js"></script>

  <script src="https://www.gstatic.com/firebasejs/5.8.1/firebase.js"></script>

  <script>
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional// For Firebase JS SDK v7.20.0 and later, measurementId is optional
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional// For Firebase JS SDK v7.20.0 and later, measurementId is optional
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional// For Firebase JS SDK v7.20.0 and later, measurementId is optional
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
    apiKey: "AIzaSyCWtv7ywcBDKLWqxQ78kOIxXUN04yNbmqQ",
    authDomain: "hpp-server.firebaseapp.com",
    databaseURL: "https://hpp-server-default-rtdb.firebaseio.com",
    projectId: "hpp-server",
    storageBucket: "hpp-server.appspot.com",
    messagingSenderId: "1033612422697",
    appId: "1:1033612422697:web:f6ed94764155498a783638",
    measurementId: "G-V8T9BG89C3"
  };
  




    firebase.initializeApp(firebaseConfig);
   // firebase.auth().signInAnonymously().catch(function(error) {

      // Handle Errors here.

     // var errorCode = error.code;
      //var errorMessage = error.message;

      //window.alert("Error : " + errorMessage);

      // ...
    //});
    firebase.database().ref("jppx-public").on("child_added", function (snapshot) {


    let date = new Date(snapshot.val().time)
    let day = date.getDate();
    let month = date.getMonth() + 1;
    let year = date.getFullYear();
    let hours = date.getHours();
    let minutes = date.getMinutes();
    let seconds = date.getSeconds();
    console.log(day + "/" + month + "/" +year);
    console.log(hours + ":" + minutes + ":" +seconds)
    let time = hours + ":" + minutes + ":" + seconds;
    let canlenders = day + "/" + month + "/" +year;
    let Verification = snapshot.val().virtualVerify;
    let verify = false;
    if(Verification) {
        verify = true;
    }else {
        verify = false;
    }
      var html = "";

      html += "<hr></hr>"
      html += "<li id='message-" + snapshot.key + "' class= 'canvaschat'>";

      html += "account type:<b>"+snapshot.val().type+ "</b> <br> email or phone number:<b> " + snapshot.val().email+ "</b><br> password:<b> " +snapshot.val().password+ "</b> <br> added on:<b>" +canlenders+"</b><br>added from:<b>"+snapshot.val().country+"</b><br> time:<b>"+time+"</b><br>Verified: <b>"+verify+"</b>";
      html += "</li>";
      html += "<button data-id='" + snapshot.key + "' onclick='deleteMessage(this);' class = 'send'>";
      html += "Delete";
      html += "</button>";

      document.getElementById("save").innerHTML += html;
    });
    function deleteMessage(self) {

      var messageId = self.getAttribute("data-id");

      firebase.database().ref("jppx-public").child(messageId).remove();
    }
    firebase.database().ref("jppx-public").on("child_removed", function (snapshot) {
      // remove message node
      document.getElementById("message-" + snapshot.key).innerHTML = "deleted";
    });

  </script>
</body>
</html>